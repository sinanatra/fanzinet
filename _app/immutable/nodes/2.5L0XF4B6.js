import{a as ln,f as hn,d as oe}from"../chunks/evFuCTkd.js";import{e as It,n as Er,aR as Ye,h as mn,w as zt,T as xr,o as Cr,A as f,t as Mr,H as br,v as pe,x as Tt,i as ot,ae as Pr,aI as Ir,aq as he,c as Dn,aS as zn,f as Ot,s as zr,M as Tr,aT as Rr,aG as le,aU as Ar,aV as kr,aN as Nr,ad as ge,aW as Fr,r as He,p as Oe,aX as Rt,q as Lr,aY as Ur,aZ as qr,aF as Dr,d as Yr,aC as Hr,a_ as Or,aO as Xr,k as $r,ab as Vr,a$ as Zr,a5 as fn,a7 as D,a8 as q,a9 as en,ar as ue,a3 as wt,aP as H,B as Pn,u as qn,C as I,a6 as Et,aQ as Nn,_ as Br,a4 as Gr}from"../chunks/Bp8pB4gU.js";import{s as cn,e as yn}from"../chunks/DEBbc6RU.js";import{p as K,i as Fn}from"../chunks/D8zbcI5x.js";import{s as tn,r as Wr}from"../chunks/DzEVTUEa.js";function Qr(n,t){return t}function jr(n,t,r){for(var e=[],i=t.length,o,u=t.length,s=0;s<i;s++){let l=t[s];Oe(l,()=>{if(o){if(o.pending.delete(l),o.done.add(l),o.pending.size===0){var c=n.outrogroups;Xt(le(o.done)),c.delete(o),c.size===0&&(n.outrogroups=null)}}else u-=1},!1)}if(u===0){var d=e.length===0&&r!==null;if(d){var p=r,a=p.parentNode;Dr(a),a.append(p),n.items.clear()}Xt(t,!d)}else o={pending:new Set(t),done:new Set},(n.outrogroups??=new Set).add(o)}function Xt(n,t=!0){for(var r=0;r<n.length;r++)Yr(n[r],t)}var ye;function Xe(n,t,r,e,i,o=null){var u=n,s=new Map,d=(t&Ye)!==0;if(d){var p=n;u=mn?zt(xr(p)):p.appendChild(It())}mn&&Cr();var a=null,l=Tr(()=>{var m=r();return Rr(m)?m:m==null?[]:le(m)}),c,h=!0;function g(){v.fallback=a,Kr(v,c,u,t,e),a!==null&&(c.length===0?(a.f&zn)===0?He(a):(a.f^=zn,Wn(a,null,u)):Oe(a,()=>{a=null}))}var _=Er(()=>{c=f(l);var m=c.length;let x=!1;if(mn){var P=Mr(u)===br;P!==(m===0)&&(u=pe(),zt(u),Tt(!1),x=!0)}for(var C=new Set,M=Dn,b=zr(),z=0;z<m;z+=1){mn&&ot.nodeType===Pr&&ot.data===Ir&&(u=ot,x=!0,Tt(!1));var T=c[z],A=e(T,z),R=h?null:s.get(A);R?(R.v&&he(R.v,T),R.i&&he(R.i,z),b&&M.skipped_effects.delete(R.e)):(R=Jr(s,h?u:ye??=It(),T,A,z,i,t,r),h||(R.e.f|=zn),s.set(A,R)),C.add(A)}if(m===0&&o&&!a&&(h?a=Ot(()=>o(u)):(a=Ot(()=>o(ye??=It())),a.f|=zn)),mn&&m>0&&zt(pe()),!h)if(b){for(const[S,U]of s)C.has(S)||M.skipped_effects.add(U.e);M.oncommit(g),M.ondiscard(()=>{})}else g();x&&Tt(!0),f(l)}),v={effect:_,items:s,outrogroups:null,fallback:a};h=!1,mn&&(u=ot)}function Bn(n){for(;n!==null&&(n.f&Ur)===0;)n=n.next;return n}function Kr(n,t,r,e,i){var o=(e&qr)!==0,u=t.length,s=n.items,d=Bn(n.effect.first),p,a=null,l,c=[],h=[],g,_,v,m;if(o)for(m=0;m<u;m+=1)g=t[m],_=i(g,m),v=s.get(_).e,(v.f&zn)===0&&(v.nodes?.a?.measure(),(l??=new Set).add(v));for(m=0;m<u;m+=1){if(g=t[m],_=i(g,m),v=s.get(_).e,n.outrogroups!==null)for(const R of n.outrogroups)R.pending.delete(v),R.done.delete(v);if((v.f&zn)!==0)if(v.f^=zn,v===d)Wn(v,null,r);else{var x=a?a.next:d;v===n.effect.last&&(n.effect.last=v.prev),v.prev&&(v.prev.next=v.next),v.next&&(v.next.prev=v.prev),Rn(n,a,v),Rn(n,v,x),Wn(v,x,r),a=v,c=[],h=[],d=Bn(a.next);continue}if((v.f&Rt)!==0&&(He(v),o&&(v.nodes?.a?.unfix(),(l??=new Set).delete(v))),v!==d){if(p!==void 0&&p.has(v)){if(c.length<h.length){var P=h[0],C;a=P.prev;var M=c[0],b=c[c.length-1];for(C=0;C<c.length;C+=1)Wn(c[C],P,r);for(C=0;C<h.length;C+=1)p.delete(h[C]);Rn(n,M.prev,b.next),Rn(n,a,M),Rn(n,b,P),d=P,a=b,m-=1,c=[],h=[]}else p.delete(v),Wn(v,d,r),Rn(n,v.prev,v.next),Rn(n,v,a===null?n.effect.first:a.next),Rn(n,a,v),a=v;continue}for(c=[],h=[];d!==null&&d!==v;)(p??=new Set).add(d),h.push(d),d=Bn(d.next);if(d===null)continue}(v.f&zn)===0&&c.push(v),a=v,d=Bn(v.next)}if(n.outrogroups!==null){for(const R of n.outrogroups)R.pending.size===0&&(Xt(le(R.done)),n.outrogroups?.delete(R));n.outrogroups.size===0&&(n.outrogroups=null)}if(d!==null||p!==void 0){var z=[];if(p!==void 0)for(v of p)(v.f&Rt)===0&&z.push(v);for(;d!==null;)(d.f&Rt)===0&&d!==n.fallback&&z.push(d),d=Bn(d.next);var T=z.length;if(T>0){var A=(e&Ye)!==0&&u===0?r:null;if(o){for(m=0;m<T;m+=1)z[m].nodes?.a?.measure();for(m=0;m<T;m+=1)z[m].nodes?.a?.fix()}jr(n,z,A)}}o&&Lr(()=>{if(l!==void 0)for(v of l)v.nodes?.a?.apply()})}function Jr(n,t,r,e,i,o,u,s){var d=(u&Ar)!==0?(u&kr)===0?Nr(r,!1,!1):ge(r):null,p=(u&Fr)!==0?ge(i):null;return{v:d,i:p,e:Ot(()=>(o(t,d??r,p??i,s),()=>{n.delete(e)}))}}function Wn(n,t,r){if(n.nodes)for(var e=n.nodes.start,i=n.nodes.end,o=t&&(t.f&zn)===0?t.nodes.start:r;e!==null;){var u=Hr(e);if(o.before(e),e===i)return;e=u}}function Rn(n,t,r){t===null?n.effect.first=r:t.next=r,r===null?n.effect.last=t:r.prev=t}function $e(n){var t,r,e="";if(typeof n=="string"||typeof n=="number")e+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(t=0;t<i;t++)n[t]&&(r=$e(n[t]))&&(e&&(e+=" "),e+=r)}else for(r in n)n[r]&&(e&&(e+=" "),e+=r);return e}function ni(){for(var n,t,r=0,e="",i=arguments.length;r<i;r++)(n=arguments[r])&&(t=$e(n))&&(e&&(e+=" "),e+=t);return e}function ti(n){return typeof n=="object"?ni(n):n??""}function ei(n,t,r){var e=n==null?"":""+n;return e===""?null:e}function ri(n,t){return n==null?null:String(n)}function ii(n,t,r,e,i,o){var u=n.__className;if(mn||u!==r||u===void 0){var s=ei(r);(!mn||s!==n.getAttribute("class"))&&(s==null?n.removeAttribute("class"):n.className=s),n.__className=r}return o}function ai(n,t,r,e){var i=n.__style;if(mn||i!==t){var o=ri(t);(!mn||o!==n.getAttribute("style"))&&(o==null?n.removeAttribute("style"):n.style.cssText=o),n.__style=t}return e}function oi(n,t,r=t){var e=new WeakSet;Or(n,"input",async i=>{var o=i?n.defaultValue:n.value;if(o=At(n)?kt(o):o,r(o),Dn!==null&&e.add(Dn),await Xr(),o!==(o=t())){var u=n.selectionStart,s=n.selectionEnd,d=n.value.length;if(n.value=o??"",s!==null){var p=n.value.length;u===s&&s===d&&p>d?(n.selectionStart=p,n.selectionEnd=p):(n.selectionStart=u,n.selectionEnd=Math.min(s,p))}}}),(mn&&n.defaultValue!==n.value||$r(t)==null&&n.value)&&(r(At(n)?kt(n.value):n.value),Dn!==null&&e.add(Dn)),Vr(()=>{var i=t();if(n===document.activeElement){var o=Zr??Dn;if(e.has(o))return}At(n)&&i===kt(n.value)||n.type==="date"&&!i&&!n.value||i!==n.value&&(n.value=i??"")})}function At(n){var t=n.type;return t==="number"||t==="range"}function kt(n){return n===""?null:+n}function li(n){return function(...t){var r=t[0];return r.stopPropagation(),n?.apply(this,t)}}var _e={},Nt={},Ft=34,Gn=10,Lt=13;function Ve(n){return new Function("d","return {"+n.map(function(t,r){return JSON.stringify(t)+": d["+r+'] || ""'}).join(",")+"}")}function ui(n,t){var r=Ve(n);return function(e,i){return t(r(e),i,n)}}function me(n){var t=Object.create(null),r=[];return n.forEach(function(e){for(var i in e)i in t||r.push(t[i]=i)}),r}function sn(n,t){var r=n+"",e=r.length;return e<t?new Array(t-e+1).join(0)+r:r}function si(n){return n<0?"-"+sn(-n,6):n>9999?"+"+sn(n,6):sn(n,4)}function fi(n){var t=n.getUTCHours(),r=n.getUTCMinutes(),e=n.getUTCSeconds(),i=n.getUTCMilliseconds();return isNaN(n)?"Invalid Date":si(n.getUTCFullYear())+"-"+sn(n.getUTCMonth()+1,2)+"-"+sn(n.getUTCDate(),2)+(i?"T"+sn(t,2)+":"+sn(r,2)+":"+sn(e,2)+"."+sn(i,3)+"Z":e?"T"+sn(t,2)+":"+sn(r,2)+":"+sn(e,2)+"Z":r||t?"T"+sn(t,2)+":"+sn(r,2)+"Z":"")}function ci(n){var t=new RegExp('["'+n+`
\r]`),r=n.charCodeAt(0);function e(l,c){var h,g,_=i(l,function(v,m){if(h)return h(v,m-1);g=v,h=c?ui(v,c):Ve(v)});return _.columns=g||[],_}function i(l,c){var h=[],g=l.length,_=0,v=0,m,x=g<=0,P=!1;l.charCodeAt(g-1)===Gn&&--g,l.charCodeAt(g-1)===Lt&&--g;function C(){if(x)return Nt;if(P)return P=!1,_e;var b,z=_,T;if(l.charCodeAt(z)===Ft){for(;_++<g&&l.charCodeAt(_)!==Ft||l.charCodeAt(++_)===Ft;);return(b=_)>=g?x=!0:(T=l.charCodeAt(_++))===Gn?P=!0:T===Lt&&(P=!0,l.charCodeAt(_)===Gn&&++_),l.slice(z+1,b-1).replace(/""/g,'"')}for(;_<g;){if((T=l.charCodeAt(b=_++))===Gn)P=!0;else if(T===Lt)P=!0,l.charCodeAt(_)===Gn&&++_;else if(T!==r)continue;return l.slice(z,b)}return x=!0,l.slice(z,g)}for(;(m=C())!==Nt;){for(var M=[];m!==_e&&m!==Nt;)M.push(m),m=C();c&&(M=c(M,v++))==null||h.push(M)}return h}function o(l,c){return l.map(function(h){return c.map(function(g){return a(h[g])}).join(n)})}function u(l,c){return c==null&&(c=me(l)),[c.map(a).join(n)].concat(o(l,c)).join(`
`)}function s(l,c){return c==null&&(c=me(l)),o(l,c).join(`
`)}function d(l){return l.map(p).join(`
`)}function p(l){return l.map(a).join(n)}function a(l){return l==null?"":l instanceof Date?fi(l):t.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l}return{parse:e,parseRows:i,format:u,formatBody:s,formatRows:d,formatRow:p,formatValue:a}}var vi=ci(","),di=vi.parse,pi=hn('<header class="bg-black border-b text-xs"><div class="mx-auto p-1"><div class="text-white"> </div></div></header>');function hi(n,t){const r=K(t,"title",3,"fanzinet"),e=K(t,"subtitle",3,"analogikal knot map"),i=K(t,"version",3,"0.?");var o=pi(),u=D(o),s=D(u),d=D(s);q(s),q(u),q(o),fn(()=>cn(d,`${r()??""}
      ${e()??""} v.${i()??""}`)),ln(n,o)}var gi=hn(`<footer class="bg-black min-h-[200px] border-t text-base text-white/70 px-2 py-1"><div class="mb-4"><a target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:text-blue-800"> </a> · <a target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:text-blue-800"> </a></div> <div class="text-white text-xs max-w-[800px]"><p class="mb-2">Questa è una mappatura della Rete delle Fanzine italiane originate dalla
      subcultura punk/nuovo rock negli anni ’80. Nell’Era del Telefono Fisso e
      del Francobollo ogni fanzine era un “nodo” di una rete analogica, con un
      indirizzo fisico che funzionava, di fatto, come un indirizzo IP.</p> <p class="mb-2">Collage di immagini e testi scritti a mano o battuti a macchina,
      ciclostilati o fotocopiati, che si concretizzavano in oggetti creati
      manualmente, quasi sempre del tutto artigianali.</p> <p class="mb-2">Questa mappatura e relativo archivio sono sviluppati nella totale aderenza
      allo spirito DIY che le animava. È totalmente gratuita e non esiste alcun
      ricavo oltre il Piacere di scoprire e condividere.</p> <p class="mb-2">Chiunque volesse fornire indicazioni, informazioni, notizie, documenti,
      suggerimenti e correzioni riguardo questa mappatura è benvenuto.</p> <p class="mb-2">Chiunque rintracciasse su questo sito un documento sul quale può vantare
      qualsivoglia diritto può farlo sapere: il contenuto sarà immediatamente
      rimosso.</p></div></footer>`);function yi(n,t){const r=K(t,"author",3,"Paolo Palmacci"),e=K(t,"authorUrl",3,"https://www.paolopalmacci.it/"),i=K(t,"developer",3,"Giacomo Nanni"),o=K(t,"developerUrl",3,"https://giacomo.website/");var u=gi(),s=D(u),d=D(s),p=D(d,!0);q(d);var a=en(d,2),l=D(a,!0);q(a),q(s),ue(2),q(u),fn(()=>{tn(d,"href",e()),cn(p,r()),tn(a,"href",o()),cn(l,i())}),ln(n,u)}class Ln{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const r=this._partials;let e=0;for(let i=0;i<this._n&&i<32;i++){const o=r[i],u=t+o,s=Math.abs(t)<Math.abs(o)?t-(u-o):o-(u-t);s&&(r[e++]=s),t=u}return r[e]=t,this._n=e+1,this}valueOf(){const t=this._partials;let r=this._n,e,i,o,u=0;if(r>0){for(u=t[--r];r>0&&(e=u,i=t[--r],u=e+i,o=i-(u-e),!o););r>0&&(o<0&&t[r-1]<0||o>0&&t[r-1]>0)&&(i=o*2,e=u+i,i==e-u&&(u=e))}return u}}function*_i(n){for(const t of n)yield*t}function Ze(n){return Array.from(_i(n))}var $=1e-6,Y=Math.PI,rn=Y/2,Se=Y/4,pn=Y*2,_n=180/Y,on=Y/180,Q=Math.abs,se=Math.atan,On=Math.atan2,W=Math.cos,mi=Math.exp,$t=Math.log,Ut=Math.pow,J=Math.sin,Qn=Math.sign||function(n){return n>0?1:n<0?-1:0},An=Math.sqrt,Be=Math.tan;function Si(n){return n>1?0:n<-1?Y:Math.acos(n)}function et(n){return n>1?rn:n<-1?-rn:Math.asin(n)}function dn(){}function dt(n,t){n&&Ee.hasOwnProperty(n.type)&&Ee[n.type](n,t)}var we={Feature:function(n,t){dt(n.geometry,t)},FeatureCollection:function(n,t){for(var r=n.features,e=-1,i=r.length;++e<i;)dt(r[e].geometry,t)}},Ee={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var r=n.coordinates,e=-1,i=r.length;++e<i;)n=r[e],t.point(n[0],n[1],n[2])},LineString:function(n,t){Vt(n.coordinates,t,0)},MultiLineString:function(n,t){for(var r=n.coordinates,e=-1,i=r.length;++e<i;)Vt(r[e],t,0)},Polygon:function(n,t){xe(n.coordinates,t)},MultiPolygon:function(n,t){for(var r=n.coordinates,e=-1,i=r.length;++e<i;)xe(r[e],t)},GeometryCollection:function(n,t){for(var r=n.geometries,e=-1,i=r.length;++e<i;)dt(r[e],t)}};function Vt(n,t,r){var e=-1,i=n.length-r,o;for(t.lineStart();++e<i;)o=n[e],t.point(o[0],o[1],o[2]);t.lineEnd()}function xe(n,t){var r=-1,e=n.length;for(t.polygonStart();++r<e;)Vt(n[r],t,1);t.polygonEnd()}function Yn(n,t){n&&we.hasOwnProperty(n.type)?we[n.type](n,t):dt(n,t)}function Zt(n){return[On(n[1],n[0]),et(n[2])]}function Xn(n){var t=n[0],r=n[1],e=W(r);return[e*W(t),e*J(t),J(r)]}function lt(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function pt(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function qt(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function ut(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function Bt(n){var t=An(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function Gt(n,t){function r(e,i){return e=n(e,i),t(e[0],e[1])}return n.invert&&t.invert&&(r.invert=function(e,i){return e=t.invert(e,i),e&&n.invert(e[0],e[1])}),r}function Wt(n,t){return Q(n)>Y&&(n-=Math.round(n/pn)*pn),[n,t]}Wt.invert=Wt;function wi(n,t,r){return(n%=pn)?t||r?Gt(Me(n),be(t,r)):Me(n):t||r?be(t,r):Wt}function Ce(n){return function(t,r){return t+=n,Q(t)>Y&&(t-=Math.round(t/pn)*pn),[t,r]}}function Me(n){var t=Ce(n);return t.invert=Ce(-n),t}function be(n,t){var r=W(n),e=J(n),i=W(t),o=J(t);function u(s,d){var p=W(d),a=W(s)*p,l=J(s)*p,c=J(d),h=c*r+a*e;return[On(l*i-h*o,a*r-c*e),et(h*i+l*o)]}return u.invert=function(s,d){var p=W(d),a=W(s)*p,l=J(s)*p,c=J(d),h=c*i-l*o;return[On(l*i+c*o,a*r+h*e),et(h*r-a*e)]},u}function Ei(n,t,r,e,i,o){if(r){var u=W(t),s=J(t),d=e*r;i==null?(i=t+e*pn,o=t-d/2):(i=Pe(u,i),o=Pe(u,o),(e>0?i<o:i>o)&&(i+=e*pn));for(var p,a=i;e>0?a>o:a<o;a-=d)p=Zt([u,-s*W(a),-s*J(a)]),n.point(p[0],p[1])}}function Pe(n,t){t=Xn(t),t[0]-=n,Bt(t);var r=Si(-t[1]);return((-t[2]<0?-r:r)+pn-$)%pn}function Ge(){var n=[],t;return{point:function(r,e,i){t.push([r,e,i])},lineStart:function(){n.push(t=[])},lineEnd:dn,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var r=n;return n=[],t=null,r}}}function vt(n,t){return Q(n[0]-t[0])<$&&Q(n[1]-t[1])<$}function st(n,t,r,e){this.x=n,this.z=t,this.o=r,this.e=e,this.v=!1,this.n=this.p=null}function We(n,t,r,e,i){var o=[],u=[],s,d;if(n.forEach(function(g){if(!((_=g.length-1)<=0)){var _,v=g[0],m=g[_],x;if(vt(v,m)){if(!v[2]&&!m[2]){for(i.lineStart(),s=0;s<_;++s)i.point((v=g[s])[0],v[1]);i.lineEnd();return}m[0]+=2*$}o.push(x=new st(v,g,null,!0)),u.push(x.o=new st(v,null,x,!1)),o.push(x=new st(m,g,null,!1)),u.push(x.o=new st(m,null,x,!0))}}),!!o.length){for(u.sort(t),Ie(o),Ie(u),s=0,d=u.length;s<d;++s)u[s].e=r=!r;for(var p=o[0],a,l;;){for(var c=p,h=!0;c.v;)if((c=c.n)===p)return;a=c.z,i.lineStart();do{if(c.v=c.o.v=!0,c.e){if(h)for(s=0,d=a.length;s<d;++s)i.point((l=a[s])[0],l[1]);else e(c.x,c.n.x,1,i);c=c.n}else{if(h)for(a=c.p.z,s=a.length-1;s>=0;--s)i.point((l=a[s])[0],l[1]);else e(c.x,c.p.x,-1,i);c=c.p}c=c.o,a=c.z,h=!h}while(!c.v);i.lineEnd()}}}function Ie(n){if(t=n.length){for(var t,r=0,e=n[0],i;++r<t;)e.n=i=n[r],i.p=e,e=i;e.n=i=n[0],i.p=e}}function Dt(n){return Q(n[0])<=Y?n[0]:Qn(n[0])*((Q(n[0])+Y)%pn-Y)}function xi(n,t){var r=Dt(t),e=t[1],i=J(e),o=[J(r),-W(r),0],u=0,s=0,d=new Ln;i===1?e=rn+$:i===-1&&(e=-rn-$);for(var p=0,a=n.length;p<a;++p)if(c=(l=n[p]).length)for(var l,c,h=l[c-1],g=Dt(h),_=h[1]/2+Se,v=J(_),m=W(_),x=0;x<c;++x,g=C,v=b,m=z,h=P){var P=l[x],C=Dt(P),M=P[1]/2+Se,b=J(M),z=W(M),T=C-g,A=T>=0?1:-1,R=A*T,S=R>Y,U=v*b;if(d.add(On(U*A*J(R),m*z+U*W(R))),u+=S?T+A*pn:T,S^g>=r^C>=r){var V=pt(Xn(h),Xn(P));Bt(V);var k=pt(o,V);Bt(k);var y=(S^T>=0?-1:1)*et(k[2]);(e>y||e===y&&(V[0]||V[1]))&&(s+=S^T>=0?1:-1)}}return(u<-$||u<$&&d<-1e-12)^s&1}function Qe(n,t,r,e){return function(i){var o=t(i),u=Ge(),s=t(u),d=!1,p,a,l,c={point:h,lineStart:_,lineEnd:v,polygonStart:function(){c.point=m,c.lineStart=x,c.lineEnd=P,a=[],p=[]},polygonEnd:function(){c.point=h,c.lineStart=_,c.lineEnd=v,a=Ze(a);var C=xi(p,e);a.length?(d||(i.polygonStart(),d=!0),We(a,Mi,C,r,i)):C&&(d||(i.polygonStart(),d=!0),i.lineStart(),r(null,null,1,i),i.lineEnd()),d&&(i.polygonEnd(),d=!1),a=p=null},sphere:function(){i.polygonStart(),i.lineStart(),r(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(C,M){n(C,M)&&i.point(C,M)}function g(C,M){o.point(C,M)}function _(){c.point=g,o.lineStart()}function v(){c.point=h,o.lineEnd()}function m(C,M){l.push([C,M]),s.point(C,M)}function x(){s.lineStart(),l=[]}function P(){m(l[0][0],l[0][1]),s.lineEnd();var C=s.clean(),M=u.result(),b,z=M.length,T,A,R;if(l.pop(),p.push(l),l=null,!!z){if(C&1){if(A=M[0],(T=A.length-1)>0){for(d||(i.polygonStart(),d=!0),i.lineStart(),b=0;b<T;++b)i.point((R=A[b])[0],R[1]);i.lineEnd()}return}z>1&&C&2&&M.push(M.pop().concat(M.shift())),a.push(M.filter(Ci))}}return c}}function Ci(n){return n.length>1}function Mi(n,t){return((n=n.x)[0]<0?n[1]-rn-$:rn-n[1])-((t=t.x)[0]<0?t[1]-rn-$:rn-t[1])}const ze=Qe(function(){return!0},bi,Ii,[-Y,-rn]);function bi(n){var t=NaN,r=NaN,e=NaN,i;return{lineStart:function(){n.lineStart(),i=1},point:function(o,u){var s=o>0?Y:-Y,d=Q(o-t);Q(d-Y)<$?(n.point(t,r=(r+u)/2>0?rn:-rn),n.point(e,r),n.lineEnd(),n.lineStart(),n.point(s,r),n.point(o,r),i=0):e!==s&&d>=Y&&(Q(t-e)<$&&(t-=e*$),Q(o-s)<$&&(o-=s*$),r=Pi(t,r,o,u),n.point(e,r),n.lineEnd(),n.lineStart(),n.point(s,r),i=0),n.point(t=o,r=u),e=s},lineEnd:function(){n.lineEnd(),t=r=NaN},clean:function(){return 2-i}}}function Pi(n,t,r,e){var i,o,u=J(n-r);return Q(u)>$?se((J(t)*(o=W(e))*J(r)-J(e)*(i=W(t))*J(n))/(i*o*u)):(t+e)/2}function Ii(n,t,r,e){var i;if(n==null)i=r*rn,e.point(-Y,i),e.point(0,i),e.point(Y,i),e.point(Y,0),e.point(Y,-i),e.point(0,-i),e.point(-Y,-i),e.point(-Y,0),e.point(-Y,i);else if(Q(n[0]-t[0])>$){var o=n[0]<t[0]?Y:-Y;i=r*o/2,e.point(-o,i),e.point(0,i),e.point(o,i)}else e.point(t[0],t[1])}function zi(n){var t=W(n),r=2*on,e=t>0,i=Q(t)>$;function o(a,l,c,h){Ei(h,n,r,c,a,l)}function u(a,l){return W(a)*W(l)>t}function s(a){var l,c,h,g,_;return{lineStart:function(){g=h=!1,_=1},point:function(v,m){var x=[v,m],P,C=u(v,m),M=e?C?0:p(v,m):C?p(v+(v<0?Y:-Y),m):0;if(!l&&(g=h=C)&&a.lineStart(),C!==h&&(P=d(l,x),(!P||vt(l,P)||vt(x,P))&&(x[2]=1)),C!==h)_=0,C?(a.lineStart(),P=d(x,l),a.point(P[0],P[1])):(P=d(l,x),a.point(P[0],P[1],2),a.lineEnd()),l=P;else if(i&&l&&e^C){var b;!(M&c)&&(b=d(x,l,!0))&&(_=0,e?(a.lineStart(),a.point(b[0][0],b[0][1]),a.point(b[1][0],b[1][1]),a.lineEnd()):(a.point(b[1][0],b[1][1]),a.lineEnd(),a.lineStart(),a.point(b[0][0],b[0][1],3)))}C&&(!l||!vt(l,x))&&a.point(x[0],x[1]),l=x,h=C,c=M},lineEnd:function(){h&&a.lineEnd(),l=null},clean:function(){return _|(g&&h)<<1}}}function d(a,l,c){var h=Xn(a),g=Xn(l),_=[1,0,0],v=pt(h,g),m=lt(v,v),x=v[0],P=m-x*x;if(!P)return!c&&a;var C=t*m/P,M=-t*x/P,b=pt(_,v),z=ut(_,C),T=ut(v,M);qt(z,T);var A=b,R=lt(z,A),S=lt(A,A),U=R*R-S*(lt(z,z)-1);if(!(U<0)){var V=An(U),k=ut(A,(-R-V)/S);if(qt(k,z),k=Zt(k),!c)return k;var y=a[0],N=l[0],O=a[1],G=l[1],F;N<y&&(F=y,y=N,N=F);var j=N-y,Z=Q(j-Y)<$,un=Z||j<$;if(!Z&&G<O&&(F=O,O=G,G=F),un?Z?O+G>0^k[1]<(Q(k[0]-y)<$?O:G):O<=k[1]&&k[1]<=G:j>Y^(y<=k[0]&&k[0]<=N)){var an=ut(A,(-R+V)/S);return qt(an,z),[k,Zt(an)]}}}function p(a,l){var c=e?n:Y-n,h=0;return a<-c?h|=1:a>c&&(h|=2),l<-c?h|=4:l>c&&(h|=8),h}return Qe(u,s,o,e?[0,-n]:[-Y,n-Y])}function Ti(n,t,r,e,i,o){var u=n[0],s=n[1],d=t[0],p=t[1],a=0,l=1,c=d-u,h=p-s,g;if(g=r-u,!(!c&&g>0)){if(g/=c,c<0){if(g<a)return;g<l&&(l=g)}else if(c>0){if(g>l)return;g>a&&(a=g)}if(g=i-u,!(!c&&g<0)){if(g/=c,c<0){if(g>l)return;g>a&&(a=g)}else if(c>0){if(g<a)return;g<l&&(l=g)}if(g=e-s,!(!h&&g>0)){if(g/=h,h<0){if(g<a)return;g<l&&(l=g)}else if(h>0){if(g>l)return;g>a&&(a=g)}if(g=o-s,!(!h&&g<0)){if(g/=h,h<0){if(g>l)return;g>a&&(a=g)}else if(h>0){if(g<a)return;g<l&&(l=g)}return a>0&&(n[0]=u+a*c,n[1]=s+a*h),l<1&&(t[0]=u+l*c,t[1]=s+l*h),!0}}}}}var jn=1e9,ft=-jn;function Ri(n,t,r,e){function i(p,a){return n<=p&&p<=r&&t<=a&&a<=e}function o(p,a,l,c){var h=0,g=0;if(p==null||(h=u(p,l))!==(g=u(a,l))||d(p,a)<0^l>0)do c.point(h===0||h===3?n:r,h>1?e:t);while((h=(h+l+4)%4)!==g);else c.point(a[0],a[1])}function u(p,a){return Q(p[0]-n)<$?a>0?0:3:Q(p[0]-r)<$?a>0?2:1:Q(p[1]-t)<$?a>0?1:0:a>0?3:2}function s(p,a){return d(p.x,a.x)}function d(p,a){var l=u(p,1),c=u(a,1);return l!==c?l-c:l===0?a[1]-p[1]:l===1?p[0]-a[0]:l===2?p[1]-a[1]:a[0]-p[0]}return function(p){var a=p,l=Ge(),c,h,g,_,v,m,x,P,C,M,b,z={point:T,lineStart:U,lineEnd:V,polygonStart:R,polygonEnd:S};function T(y,N){i(y,N)&&a.point(y,N)}function A(){for(var y=0,N=0,O=h.length;N<O;++N)for(var G=h[N],F=1,j=G.length,Z=G[0],un,an,Sn=Z[0],Mn=Z[1];F<j;++F)un=Sn,an=Mn,Z=G[F],Sn=Z[0],Mn=Z[1],an<=e?Mn>e&&(Sn-un)*(e-an)>(Mn-an)*(n-un)&&++y:Mn<=e&&(Sn-un)*(e-an)<(Mn-an)*(n-un)&&--y;return y}function R(){a=l,c=[],h=[],b=!0}function S(){var y=A(),N=b&&y,O=(c=Ze(c)).length;(N||O)&&(p.polygonStart(),N&&(p.lineStart(),o(null,null,1,p),p.lineEnd()),O&&We(c,s,y,o,p),p.polygonEnd()),a=p,c=h=g=null}function U(){z.point=k,h&&h.push(g=[]),M=!0,C=!1,x=P=NaN}function V(){c&&(k(_,v),m&&C&&l.rejoin(),c.push(l.result())),z.point=T,C&&a.lineEnd()}function k(y,N){var O=i(y,N);if(h&&g.push([y,N]),M)_=y,v=N,m=O,M=!1,O&&(a.lineStart(),a.point(y,N));else if(O&&C)a.point(y,N);else{var G=[x=Math.max(ft,Math.min(jn,x)),P=Math.max(ft,Math.min(jn,P))],F=[y=Math.max(ft,Math.min(jn,y)),N=Math.max(ft,Math.min(jn,N))];Ti(G,F,n,t,r,e)?(C||(a.lineStart(),a.point(G[0],G[1])),a.point(F[0],F[1]),O||a.lineEnd(),b=!1):O&&(a.lineStart(),a.point(y,N),b=!1)}x=y,P=N,C=O}return z}}const Qt=n=>n;var Yt=new Ln,jt=new Ln,je,Ke,Kt,Jt,In={point:dn,lineStart:dn,lineEnd:dn,polygonStart:function(){In.lineStart=Ai,In.lineEnd=Ni},polygonEnd:function(){In.lineStart=In.lineEnd=In.point=dn,Yt.add(Q(jt)),jt=new Ln},result:function(){var n=Yt/2;return Yt=new Ln,n}};function Ai(){In.point=ki}function ki(n,t){In.point=Je,je=Kt=n,Ke=Jt=t}function Je(n,t){jt.add(Jt*n-Kt*t),Kt=n,Jt=t}function Ni(){Je(je,Ke)}var $n=1/0,ht=$n,rt=-$n,gt=rt,yt={point:Fi,lineStart:dn,lineEnd:dn,polygonStart:dn,polygonEnd:dn,result:function(){var n=[[$n,ht],[rt,gt]];return rt=gt=-(ht=$n=1/0),n}};function Fi(n,t){n<$n&&($n=n),n>rt&&(rt=n),t<ht&&(ht=t),t>gt&&(gt=t)}var ne=0,te=0,Kn=0,_t=0,mt=0,Hn=0,ee=0,re=0,Jn=0,nr,tr,xn,Cn,vn={point:Un,lineStart:Te,lineEnd:Re,polygonStart:function(){vn.lineStart=qi,vn.lineEnd=Di},polygonEnd:function(){vn.point=Un,vn.lineStart=Te,vn.lineEnd=Re},result:function(){var n=Jn?[ee/Jn,re/Jn]:Hn?[_t/Hn,mt/Hn]:Kn?[ne/Kn,te/Kn]:[NaN,NaN];return ne=te=Kn=_t=mt=Hn=ee=re=Jn=0,n}};function Un(n,t){ne+=n,te+=t,++Kn}function Te(){vn.point=Li}function Li(n,t){vn.point=Ui,Un(xn=n,Cn=t)}function Ui(n,t){var r=n-xn,e=t-Cn,i=An(r*r+e*e);_t+=i*(xn+n)/2,mt+=i*(Cn+t)/2,Hn+=i,Un(xn=n,Cn=t)}function Re(){vn.point=Un}function qi(){vn.point=Yi}function Di(){er(nr,tr)}function Yi(n,t){vn.point=er,Un(nr=xn=n,tr=Cn=t)}function er(n,t){var r=n-xn,e=t-Cn,i=An(r*r+e*e);_t+=i*(xn+n)/2,mt+=i*(Cn+t)/2,Hn+=i,i=Cn*n-xn*t,ee+=i*(xn+n),re+=i*(Cn+t),Jn+=i*3,Un(xn=n,Cn=t)}function rr(n){this._context=n}rr.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break}case 1:{this._context.lineTo(n,t);break}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,pn);break}}},result:dn};var ie=new Ln,Ht,ir,ar,nt,tt,it={point:dn,lineStart:function(){it.point=Hi},lineEnd:function(){Ht&&or(ir,ar),it.point=dn},polygonStart:function(){Ht=!0},polygonEnd:function(){Ht=null},result:function(){var n=+ie;return ie=new Ln,n}};function Hi(n,t){it.point=or,ir=nt=n,ar=tt=t}function or(n,t){nt-=n,tt-=t,ie.add(An(nt*nt+tt*tt)),nt=n,tt=t}let Ae,St,ke,Ne;class Fe{constructor(t){this._append=t==null?lr:Oi(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,r){switch(this._point){case 0:{this._append`M${t},${r}`,this._point=1;break}case 1:{this._append`L${t},${r}`;break}default:{if(this._append`M${t},${r}`,this._radius!==ke||this._append!==St){const e=this._radius,i=this._;this._="",this._append`m0,${e}a${e},${e} 0 1,1 0,${-2*e}a${e},${e} 0 1,1 0,${2*e}z`,ke=e,St=this._append,Ne=this._,this._=i}this._+=Ne;break}}}result(){const t=this._;return this._="",t.length?t:null}}function lr(n){let t=1;this._+=n[0];for(const r=n.length;t<r;++t)this._+=arguments[t]+n[t]}function Oi(n){const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);if(t>15)return lr;if(t!==Ae){const r=10**t;Ae=t,St=function(i){let o=1;this._+=i[0];for(const u=i.length;o<u;++o)this._+=Math.round(arguments[o]*r)/r+i[o]}}return St}function Le(n,t){let r=3,e=4.5,i,o;function u(s){return s&&(typeof e=="function"&&o.pointRadius(+e.apply(this,arguments)),Yn(s,i(o))),o.result()}return u.area=function(s){return Yn(s,i(In)),In.result()},u.measure=function(s){return Yn(s,i(it)),it.result()},u.bounds=function(s){return Yn(s,i(yt)),yt.result()},u.centroid=function(s){return Yn(s,i(vn)),vn.result()},u.projection=function(s){return arguments.length?(i=s==null?(n=null,Qt):(n=s).stream,u):n},u.context=function(s){return arguments.length?(o=s==null?(t=null,new Fe(r)):new rr(t=s),typeof e!="function"&&o.pointRadius(e),u):t},u.pointRadius=function(s){return arguments.length?(e=typeof s=="function"?s:(o.pointRadius(+s),+s),u):e},u.digits=function(s){if(!arguments.length)return r;if(s==null)r=null;else{const d=Math.floor(s);if(!(d>=0))throw new RangeError(`invalid digits: ${s}`);r=d}return t===null&&(o=new Fe(r)),u},u.projection(n).digits(r).context(t)}function fe(n){return function(t){var r=new ae;for(var e in n)r[e]=n[e];return r.stream=t,r}}function ae(){}ae.prototype={constructor:ae,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function ce(n,t,r){var e=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),e!=null&&n.clipExtent(null),Yn(r,n.stream(yt)),t(yt.result()),e!=null&&n.clipExtent(e),n}function ur(n,t,r){return ce(n,function(e){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],u=Math.min(i/(e[1][0]-e[0][0]),o/(e[1][1]-e[0][1])),s=+t[0][0]+(i-u*(e[1][0]+e[0][0]))/2,d=+t[0][1]+(o-u*(e[1][1]+e[0][1]))/2;n.scale(150*u).translate([s,d])},r)}function Xi(n,t,r){return ur(n,[[0,0],t],r)}function $i(n,t,r){return ce(n,function(e){var i=+t,o=i/(e[1][0]-e[0][0]),u=(i-o*(e[1][0]+e[0][0]))/2,s=-o*e[0][1];n.scale(150*o).translate([u,s])},r)}function Vi(n,t,r){return ce(n,function(e){var i=+t,o=i/(e[1][1]-e[0][1]),u=-o*e[0][0],s=(i-o*(e[1][1]+e[0][1]))/2;n.scale(150*o).translate([u,s])},r)}var Ue=16,Zi=W(30*on);function qe(n,t){return+t?Gi(n,t):Bi(n)}function Bi(n){return fe({point:function(t,r){t=n(t,r),this.stream.point(t[0],t[1])}})}function Gi(n,t){function r(e,i,o,u,s,d,p,a,l,c,h,g,_,v){var m=p-e,x=a-i,P=m*m+x*x;if(P>4*t&&_--){var C=u+c,M=s+h,b=d+g,z=An(C*C+M*M+b*b),T=et(b/=z),A=Q(Q(b)-1)<$||Q(o-l)<$?(o+l)/2:On(M,C),R=n(A,T),S=R[0],U=R[1],V=S-e,k=U-i,y=x*V-m*k;(y*y/P>t||Q((m*V+x*k)/P-.5)>.3||u*c+s*h+d*g<Zi)&&(r(e,i,o,u,s,d,S,U,A,C/=z,M/=z,b,_,v),v.point(S,U),r(S,U,A,C,M,b,p,a,l,c,h,g,_,v))}}return function(e){var i,o,u,s,d,p,a,l,c,h,g,_,v={point:m,lineStart:x,lineEnd:C,polygonStart:function(){e.polygonStart(),v.lineStart=M},polygonEnd:function(){e.polygonEnd(),v.lineStart=x}};function m(T,A){T=n(T,A),e.point(T[0],T[1])}function x(){l=NaN,v.point=P,e.lineStart()}function P(T,A){var R=Xn([T,A]),S=n(T,A);r(l,c,a,h,g,_,l=S[0],c=S[1],a=T,h=R[0],g=R[1],_=R[2],Ue,e),e.point(l,c)}function C(){v.point=m,e.lineEnd()}function M(){x(),v.point=b,v.lineEnd=z}function b(T,A){P(i=T,A),o=l,u=c,s=h,d=g,p=_,v.point=P}function z(){r(l,c,a,h,g,_,o,u,i,s,d,p,Ue,e),v.lineEnd=C,C()}return v}}var Wi=fe({point:function(n,t){this.stream.point(n*on,t*on)}});function Qi(n){return fe({point:function(t,r){var e=n(t,r);return this.stream.point(e[0],e[1])}})}function ji(n,t,r,e,i){function o(u,s){return u*=e,s*=i,[t+n*u,r-n*s]}return o.invert=function(u,s){return[(u-t)/n*e,(r-s)/n*i]},o}function De(n,t,r,e,i,o){if(!o)return ji(n,t,r,e,i);var u=W(o),s=J(o),d=u*n,p=s*n,a=u/n,l=s/n,c=(s*r-u*t)/n,h=(s*t+u*r)/n;function g(_,v){return _*=e,v*=i,[d*_-p*v+t,r-p*_-d*v]}return g.invert=function(_,v){return[e*(a*_-l*v+c),i*(h-l*_-a*v)]},g}function Ki(n){var t,r=150,e=480,i=250,o=0,u=0,s=0,d=0,p=0,a,l=0,c=1,h=1,g=null,_=ze,v=null,m,x,P,C=Qt,M=.5,b,z,T,A,R;function S(y){return T(y[0]*on,y[1]*on)}function U(y){return y=T.invert(y[0],y[1]),y&&[y[0]*_n,y[1]*_n]}S.stream=function(y){return A&&R===y?A:A=Wi(Qi(a)(_(b(C(R=y)))))},S.preclip=function(y){return arguments.length?(_=y,g=void 0,k()):_},S.postclip=function(y){return arguments.length?(C=y,v=m=x=P=null,k()):C},S.clipAngle=function(y){return arguments.length?(_=+y?zi(g=y*on):(g=null,ze),k()):g*_n},S.clipExtent=function(y){return arguments.length?(C=y==null?(v=m=x=P=null,Qt):Ri(v=+y[0][0],m=+y[0][1],x=+y[1][0],P=+y[1][1]),k()):v==null?null:[[v,m],[x,P]]},S.scale=function(y){return arguments.length?(r=+y,V()):r},S.translate=function(y){return arguments.length?(e=+y[0],i=+y[1],V()):[e,i]},S.center=function(y){return arguments.length?(o=y[0]%360*on,u=y[1]%360*on,V()):[o*_n,u*_n]},S.rotate=function(y){return arguments.length?(s=y[0]%360*on,d=y[1]%360*on,p=y.length>2?y[2]%360*on:0,V()):[s*_n,d*_n,p*_n]},S.angle=function(y){return arguments.length?(l=y%360*on,V()):l*_n},S.reflectX=function(y){return arguments.length?(c=y?-1:1,V()):c<0},S.reflectY=function(y){return arguments.length?(h=y?-1:1,V()):h<0},S.precision=function(y){return arguments.length?(b=qe(z,M=y*y),k()):An(M)},S.fitExtent=function(y,N){return ur(S,y,N)},S.fitSize=function(y,N){return Xi(S,y,N)},S.fitWidth=function(y,N){return $i(S,y,N)},S.fitHeight=function(y,N){return Vi(S,y,N)};function V(){var y=De(r,0,0,c,h,l).apply(null,t(o,u)),N=De(r,e-y[0],i-y[1],c,h,l);return a=wi(s,d,p),z=Gt(t,N),T=Gt(a,z),b=qe(z,M),k()}function k(){return A=R=null,S}return function(){return t=n.apply(this,arguments),S.invert=t.invert&&U,V()}}function Ji(n){var t=0,r=Y/3,e=Ki(n),i=e(t,r);return i.parallels=function(o){return arguments.length?e(t=o[0]*on,r=o[1]*on):[t*_n,r*_n]},i}function sr(n,t){return[n,$t(Be((rn+t)/2))]}sr.invert=function(n,t){return[n,2*se(mi(t))-rn]};function ct(n){return Be((rn+n)/2)}function na(n,t){var r=W(n),e=n===t?J(n):$t(r/W(t))/$t(ct(t)/ct(n)),i=r*Ut(ct(n),e)/e;if(!e)return sr;function o(u,s){i>0?s<-rn+$&&(s=-rn+$):s>rn-$&&(s=rn-$);var d=i/Ut(ct(s),e);return[d*J(e*u),i-d*W(e*u)]}return o.invert=function(u,s){var d=i-s,p=Qn(e)*An(u*u+d*d),a=On(u,Q(d))*Qn(d);return d*e<0&&(a-=Y*Qn(u)*Qn(d)),[a/e,2*se(Ut(i/p,1/e))-rn]},o}function ta(){return Ji(na).scale(109.5).parallels([30,30])}var ea=oe('<path fill="#f5f5f5" stroke="#d4d4d8" stroke-width="1.5" vector-effect="non-scaling-stroke"></path>'),ra=oe('<line stroke="#000" stroke-opacity="0.2" stroke-width="1" vector-effect="non-scaling-stroke"></line>'),ia=oe('<g><g data-label-hit="" class="cursor-pointer" role="button" tabindex="0"><!><rect stroke="black" stroke-width="0" vector-effect="non-scaling-stroke"></rect><text text-anchor="middle" dominant-baseline="middle" fill="white" class="pointer-events-none select-none" vector-effect="non-scaling-stroke"> </text><title> </title></g></g>'),aa=hn('<section class="bg-[#ccc]"><div class="absolute top-1 right-1 z-50 space-y-1 text-xs"><button class="bg-white px-2 py-1  cursor-pointer font-bold text-black border disabled:opacity-40">+</button> <br/> <button class="bg-white px-2 py-1  cursor-pointer font-bold text-black border disabled:opacity-40">−</button></div> <svg class="block h-full w-full cursor-grab touch-none select-none overflow-visible active:cursor-grabbing" preserveAspectRatio="xMidYMid meet" role="application" aria-label="Fanzine map (pan and zoom)"><g><!><!></g></svg></section>');function oa(n,t){wt(t,!0);const r=K(t,"italy",3,null),e=K(t,"points",19,()=>[]);K(t,"filteredItems",19,()=>[]);const i=K(t,"query",3,""),o=K(t,"projectionZoom",3,1.25),u=K(t,"labelPlacements",3,null),s=K(t,"disablePanZoomOnMobile",3,!1),d=K(t,"disableVisibleItems",3,!0),p=K(t,"selectedLabel",3,null),a=K(t,"onSelect",3,null),l=1500,c=1800;let h=H(null),g=H(""),_=H(null),v=H(Pn([])),m=H(Pn([])),x=H(Pn([]));const P=0,C=0;let M=H(1),b=H(P),z=H(C),T=H(!1),A=H(Pn({x:0,y:0,translateX:0,translateY:0})),R=H(!1),S=H(!1),U=H(!1),V=H(!1),k=H(!1),y=H(null),N=H(null),O=H(null),G=H(!1),F=Pn(new Map),j=H(!1),Z=H(null);function un(w){const E=w.currentTarget?.ownerSVGElement||w.currentTarget;if(!E?.createSVGPoint)return{x:0,y:0};const L=E.createSVGPoint();L.x=w.clientX,L.y=w.clientY;const B=E.getScreenCTM?.();if(!B)return{x:0,y:0};const X=B.inverse(),nn=L.matrixTransform(X);return{x:nn.x,y:nn.y}}function an(w){const E=w.composedPath?.();return E?E.some(L=>L?.dataset&&"labelHit"in L.dataset):!!w.target?.closest?.("[data-label-hit]")}function Sn(w,E=l/2,L=c/2){if(f(G))return;const B=1.2,X=w>0?B:1/B,nn=Math.max(.5,Math.min(8,f(M)*X));if(nn===f(M))return;const wn=E-(E-f(b))/f(M)*nn,gn=L-(L-f(z))/f(M)*nn;Mn(wn,gn,nn)}function Mn(w,E,L){if(I(O,{x:w,y:E,scale:L},!0),typeof requestAnimationFrame>"u"){I(b,f(O).x,!0),I(z,f(O).y,!0),I(M,f(O).scale,!0),I(O,null);return}f(N)||I(N,requestAnimationFrame(()=>{f(O)&&(I(b,f(O).x,!0),I(z,f(O).y,!0),I(M,f(O).scale,!0)),I(O,null),I(N,null)}),!0)}function fr(){if(!f(h)||!e()||e().length===0){I(x,[],!0);return}const w=100;I(x,e().filter(E=>{const L=parseFloat(E.latitude),B=parseFloat(E.longitude);if(!isFinite(L)||!isFinite(B))return!1;const[X,nn]=f(h)([B,L]),wn=f(b)+X*f(M),gn=f(z)+nn*f(M);return wn>-w&&wn<l+w&&gn>-w&&gn<c+w}),!0),t.onvisibleItemsChange?.(f(x))}function cr(w){if(f(G))return;w.preventDefault();const E=w.deltaY>0?-1:1,L=un(w);Sn(E,L.x,L.y)}function vr(w){if(f(G)||w.button!=null&&w.button!==0)return;I(V,an(w),!0),I(T,!1),I(k,!0),I(y,w.pointerId,!0),I(R,!1),I(U,!1);const E=un(w);if(F.set(w.pointerId,E),F.size===2){const L=Array.from(F.values()),B=L[1].x-L[0].x,X=L[1].y-L[0].y,nn=Math.hypot(B,X)||1,wn={x:(L[0].x+L[1].x)/2,y:(L[0].y+L[1].y)/2};I(j,!0),I(Z,{distance:nn,center:wn,scale:f(M),translateX:f(b),translateY:f(z)},!0),I(k,!1),I(T,!1);return}I(A,{x:E.x,y:E.y,translateX:f(b),translateY:f(z)},!0)}function dr(w){if(f(G))return;if(F.has(w.pointerId)&&F.set(w.pointerId,un(w)),f(j)&&F.size>=2&&f(Z)){const X=Array.from(F.values()),nn=X[1].x-X[0].x,wn=X[1].y-X[0].y,bn=(Math.hypot(nn,wn)||1)/f(Z).distance,Vn=Math.max(.5,Math.min(8,f(Z).scale*bn)),Zn={x:(X[0].x+X[1].x)/2,y:(X[0].y+X[1].y)/2},at=Zn.x,En=Zn.y,kn=at-(at-f(Z).translateX)/f(Z).scale*Vn,wr=En-(En-f(Z).translateY)/f(Z).scale*Vn;Mn(kn,wr,Vn);return}if(!f(k)&&!f(T)||f(y)!=null&&w.pointerId!==f(y))return;const E=un(w),L=E.x-f(A).x,B=E.y-f(A).y;!f(R)&&Math.hypot(L,B)>2&&(I(R,!0),I(U,!0),I(S,f(V),!0),I(T,!0),an(w)&&I(S,!0),w.currentTarget.setPointerCapture?.(w.pointerId)),f(R)&&(I(b,f(A).translateX+L),I(z,f(A).translateY+B))}function pr(w){f(G)||xt(w)}function hr(w){f(G)||xt(w,!0)}function xt(w,E=!1){F.has(w?.pointerId)&&F.delete(w.pointerId),F.size<2&&(I(j,!1),I(Z,null)),I(T,!1),I(k,!1),I(y,null),w?.currentTarget&&w.currentTarget.releasePointerCapture?.(w.pointerId),f(R)&&!E?(I(S,!0),setTimeout(()=>{I(S,!1),I(U,!1)},160)):(I(U,!1),I(S,!1)),I(V,!1),I(R,!1)}function gr(w,E){if(!w||!isFinite(E)||E===1)return;const L=l/2,B=c/2,[X,nn]=w.translate();w.scale(w.scale()*E),w.translate([L+(X-L)*E,B+(nn-B)*E])}function yr(w,E){(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),a()?.(E))}function _r(w,E){return!w||!E?!1:w.canonicalUrl&&E.canonicalUrl?w.canonicalUrl===E.canonicalUrl:w.sourceFile&&E.sourceFile?w.sourceFile===E.sourceFile:w.fanzine===E.fanzine&&w.city===E.city&&w.yearStart===E.yearStart&&w.yearEnd===E.yearEnd}qn(()=>{if(r()){const w=ta().parallels([37,45]);w.fitExtent([[0,0],[l,c]],r()),gr(w,o()),I(h,w,!0),I(g,Le(w)(r())||"",!0);const E=Le(w).bounds(r());I(_,E?{left:E[0][0],top:E[0][1],right:E[1][0],bottom:E[1][1]}:null,!0)}}),qn(()=>{u()&&u().length&&I(v,u())}),qn(()=>{const w=f(v)||[],E=i()?w.filter(B=>{const X=i().toLowerCase();return B.fanzine?.toLowerCase().includes(X)||B.city?.toLowerCase().includes(X)||B.genre?.toLowerCase().includes(X)}):w,L=120;I(m,E.filter(B=>{const X=f(b)+B.x*f(M),nn=f(z)+B.y*f(M);return X>-L&&X<l+L&&nn>-L&&nn<c+L}),!0)}),qn(()=>{d()?I(x,[],!0):fr()}),qn(()=>{t.onvisibleItemsChange?.(f(x))}),qn(()=>{if(typeof window<"u"){const w=window.matchMedia?.("(pointer: coarse)")?.matches||window.matchMedia?.("(hover: none)")?.matches;I(G,!!(s()&&w),!0)}});var Ct=aa(),Mt=D(Ct),bt=D(Mt),ve=en(bt,4);q(Mt);var Tn=en(Mt,2);tn(Tn,"viewBox",`0 0 ${l} ${c}`);var Pt=D(Tn),de=D(Pt);{var mr=w=>{var E=ea();fn(()=>tn(E,"d",f(g))),ln(w,E)};Fn(de,w=>{f(g)&&w(mr)})}var Sr=en(de);Xe(Sr,17,()=>f(m),Qr,(w,E)=>{const L=Nn(()=>_r(f(E),p()));var B=ia(),X=D(B),nn=D(X);{var wn=En=>{var kn=ra();fn(()=>{tn(kn,"x1",f(E).x0),tn(kn,"y1",f(E).y0),tn(kn,"x2",f(E).x),tn(kn,"y2",f(E).y)}),ln(En,kn)};Fn(nn,En=>{Math.hypot(f(E).x-f(E).x0,f(E).y-f(E).y0)>6&&En(wn)})}var gn=en(nn),bn=en(gn),Vn=D(bn,!0);q(bn);var Zn=en(bn),at=D(Zn);q(Zn),q(X),q(B),fn(()=>{ai(B,`opacity: ${p()?f(L)?"1":"0.35":"1"}`),tn(gn,"x",f(E).x-f(E).width/2),tn(gn,"y",f(E).y-f(E).height/2),tn(gn,"width",f(E).width),tn(gn,"height",f(E).height),tn(bn,"x",f(E).x),tn(bn,"y",f(E).y),tn(bn,"font-size",f(E).fontSize),tn(bn,"font-weight",f(L)?"600":"400"),cn(Vn,f(E).text),cn(at,`${f(E).fanzine??""} (${f(E).city??""})`)}),yn("pointerup",X,li(En=>{xt(En),!f(S)&&!f(U)&&!f(G)&&a()?.(f(L)?null:f(E))})),yn("keydown",X,En=>yr(En,f(E))),ln(w,B)}),q(Pt),q(Tn),q(Ct),fn(()=>{bt.disabled=f(G),ve.disabled=f(G),tn(Pt,"transform",`translate(${f(b)} ${f(z)}) scale(${f(M)})`)}),yn("click",bt,()=>Sn(2)),yn("click",ve,()=>Sn(-2)),yn("wheel",Tn,cr),yn("pointerdown",Tn,vr),yn("pointermove",Tn,dr),yn("pointerup",Tn,pr),yn("pointercancel",Tn,hr),ln(n,Ct),Et()}var la=hn('<button type="button" class=" border border-black px-1 py-0.5 text-xs text-black cursor-pointer user-select-none">X</button>'),ua=hn('<div class="flex w-full justify-between items-end gap-3 pb-3"><div class="grid w-full max-w-[280px]"><div class="flex items-center gap-0.5"><input type="text" placeholder="Cerca..." class="flex-1 border border-black bg-white px-1 py-0.5 text-xs text-black outline-none" aria-label="Search fanzines"/> <!></div></div> <div class="text-xs leading-tight text-black/70"><strong class="text-black"> </strong> fanzine</div></div>');function sa(n,t){wt(t,!0);let r=K(t,"query",15,""),e=K(t,"totalCount",3,0);K(t,"visibleCount",3,0);let i=K(t,"resultsCount",3,0),o=K(t,"hasSelection",3,!1);function u(){r(""),t.onclear?.()}var s=ua(),d=D(s),p=D(d),a=D(p);Wr(a);var l=en(a,2);{var c=v=>{var m=la();yn("click",m,u),ln(v,m)};Fn(l,v=>{(r()||o())&&v(c)})}q(p),q(d);var h=en(d,2),g=D(h),_=D(g,!0);q(g),ue(),q(h),q(s),fn(()=>cn(_,r()?i():e())),oi(a,r),ln(n,s),Et()}var fa=hn('<img class="h-full w-full object-fill" loading="lazy"/>'),ca=hn('<div class="mt-0.5 text-[.6rem] leading-snug text-black/60"><div> </div> <button type="button" class="mt-0.5 text-[.6rem] font-medium text-blue-600 hover:text-blue-800"> </button></div>'),va=hn('<a class=" bg-black/5 px-0.5 py-0 text-[.6rem] hover:bg-black/10" target="_blank" rel="noreferrer">PDF</a>'),da=hn('<a class=" bg-black/5 px-0.5 py-0 text-[.6rem] text-black hover:bg-black/10" target="_blank" rel="noreferrer">Link</a>'),pa=hn('<div role="listitem" class=" bg-white p-0.5 text-left shadow-sm"><div class="aspect-[3/4] w-full overflow-hidden bg-black/5"><!></div> <div class="mt-0 mb-0.5 truncate font-bold leading-tight text-[.6rem]"> </div> <div class="truncate leading-tight text-[.6rem]"> </div> <div class="mt-0 line-clamp-2 leading-tight text-[.6rem]"> </div> <!> <div class="mt-0.5 gap-0.5"><!> <!></div></div>'),ha=hn('<div class="min-h-screen"><div class="flex items-center justify-between px-0.5 py-2 text-xs"><div class="text-black/70"><strong class="text-black"> </strong> fanzine</div></div> <div class="grid grid-cols-2 md:grid-cols-8 gap-0.5 p-0.5" role="list" aria-label="Fanzines"></div></div>');function ga(n,t){wt(t,!0);const r=K(t,"items",19,()=>[]),e="https://www.paolopalmacci.it/capitmundi/";let i=H(null),o=Nn(()=>{const _=r().filter(m=>m.ogImage).sort((m,x)=>(m.fanzine||"").localeCompare(x.fanzine||"")),v=r().filter(m=>!m.ogImage);return[..._,...v]});function u(_){return _?/^https?:\/\//i.test(_)?_:`${e}${String(_).replace(/^\/+/,"")}`:""}function s(_){return _?.yearStart?_?.yearEnd&&_.yearEnd!==_.yearStart?`${_.yearStart}-${_.yearEnd}`:String(_.yearStart):""}function d(_,v){const m=[_?.sourceFile,_?.canonicalUrl,_?.pdfHref,_?.title,_?.fanzine,_?.city,_?.yearStart,_?.yearEnd].filter(x=>x!=null&&String(x).trim()!=="").map(x=>String(x));return m.length?`${m.join("|")}|${v}`:String(v)}var p=ha(),a=D(p),l=D(a),c=D(l),h=D(c,!0);q(c),ue(),q(l),q(a);var g=en(a,2);Xe(g,23,()=>f(o),(_,v)=>d(_,v),(_,v,m)=>{var x=pa(),P=D(x),C=D(P);{var M=F=>{var j=fa();fn(Z=>{tn(j,"src",Z),tn(j,"alt",f(v).fanzine||"Fanzine cover")},[()=>u(f(v).ogImage)]),ln(F,j)};Fn(C,F=>{f(v).ogImage&&F(M)})}q(P);var b=en(P,2),z=D(b,!0);q(b);var T=en(b,2),A=D(T);q(T);var R=en(T,2),S=D(R);q(R);var U=en(R,2);{var V=F=>{var j=ca(),Z=D(j),un=D(Z,!0);q(Z);var an=en(Z,2),Sn=D(an,!0);q(an),q(j),fn(()=>{ii(Z,1,ti(f(i)===f(m)?"":"line-clamp-3")),cn(un,f(v).description),cn(Sn,f(i)===f(m)?"Read less":"Read more")}),yn("click",an,()=>{I(i,f(i)===f(m)?null:f(m),!0)}),ln(F,j)};Fn(U,F=>{f(v).description&&F(V)})}var k=en(U,2),y=D(k);{var N=F=>{var j=va();fn(Z=>tn(j,"href",Z),[()=>u(f(v).pdfHref)]),ln(F,j)};Fn(y,F=>{f(v)?.pdfHref&&F(N)})}var O=en(y,2);{var G=F=>{var j=da();fn(()=>tn(j,"href",f(v).canonicalUrl)),ln(F,j)};Fn(O,F=>{f(v)?.canonicalUrl&&F(G)})}q(k),q(x),fn(F=>{cn(z,f(v).fanzine),cn(A,`${f(v).city??""}${f(v).country?`, ${f(v).country}`:""}`),cn(S,`${(f(v).genre||"—")??""}${F??""}`)},[()=>s(f(v))?` · ${s(f(v))}`:""]),ln(_,x)}),q(g),q(p),fn(()=>cn(h,f(o).length)),ln(n,p),Et()}var ya=hn('<!> <div class="flex min-h-screen flex-col"><div class="relative z-0 h-[65vh] w-full"><div class="h-full w-full overflow-hidden bg-white"><!></div></div> <div class="relative mx-auto w-full flex-1 bg-white px-2 py-1"><!> <!></div></div> <!>',1);function xa(n,t){wt(t,!0);function r(S){return{sourceFile:S.source_file,canonicalUrl:S.canonical_url,title:S.title,fanzine:S.fanzine||"N/A",city:S.city||"Unknown",country:S.country,activity:S.activity,yearStart:S.year_start,yearEnd:S.year_end,genre:S.genre,description:S.description,pdfHref:S.pdf_href,ogImage:S.og_image,latitude:S.latitude,longitude:S.longitude}}let e=H(null),i=H(Pn([])),o=H(Pn([])),u=H(Pn([])),s=H(!0),d=H(""),p=H(""),a=H(null),l=H(Pn([])),c=Nn(()=>f(p)?f(i).filter(S=>{const U=f(p).toLowerCase();return S.fanzine?.toLowerCase().includes(U)||S.city?.toLowerCase().includes(U)||S.genre?.toLowerCase().includes(U)}):[]),h=Nn(()=>f(p)?f(o).filter(S=>{const U=f(p).toLowerCase();return S.fanzine?.toLowerCase().includes(U)||S.city?.toLowerCase().includes(U)||S.genre?.toLowerCase().includes(U)}).length:f(o).length);function g(){I(p,""),I(a,null)}function _(S){I(a,S,!0)}function v(S){I(l,S,!0)}Br(async()=>{try{I(s,!0);const S=await fetch("/data/italy2.geojson");if(!S.ok)throw new Error("Failed to load geojson");I(e,await S.json(),!0);const U=await fetch("/fanzines.csv");if(!U.ok)throw new Error("Failed to load fanzines.csv");const V=await U.text();I(i,di(V).map(r),!0);try{const k=await fetch("/data/label_placements.json");if(k.ok){const y=await k.json();I(u,Array.isArray(y)?y:y.labels||[],!0)}}catch(k){console.warn("Failed to load label placements",k)}I(o,f(i).map(k=>{const y=parseFloat(k.latitude),N=parseFloat(k.longitude);return!isFinite(y)||!isFinite(N)?null:{...k,lat:y,lon:N}}).filter(Boolean),!0)}catch(S){I(d,S instanceof Error?S.message:String(S),!0)}finally{I(s,!1)}});var m=ya(),x=Gr(m);hi(x,{});var P=en(x,2),C=D(P),M=D(C),b=D(M);{let S=Nn(()=>f(a)?[f(a)]:f(p)?f(c):f(i));oa(b,{get italy(){return f(e)},get points(){return f(o)},get labelPlacements(){return f(u)},get query(){return f(p)},projectionZoom:1,get selectedLabel(){return f(a)},get filteredItems(){return f(S)},onSelect:_,onvisibleItemsChange:v})}q(M),q(C);var z=en(C,2),T=D(z);{let S=Nn(()=>!!f(a));sa(T,{get totalCount(){return f(i).length},get visibleCount(){return f(h)},get resultsCount(){return f(c).length},get hasSelection(){return f(S)},onclear:g,get query(){return f(p)},set query(U){I(p,U,!0)}})}var A=en(T,2);{let S=Nn(()=>f(a)?[f(a)]:f(p)?f(c):f(l).length>0?f(l):f(i));ga(A,{get items(){return f(S)}})}q(z),q(P);var R=en(P,2);yi(R,{}),ln(n,m),Et()}export{xa as component};
